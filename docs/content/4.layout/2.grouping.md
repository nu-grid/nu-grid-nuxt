---
title: Grouping
description: Group rows by columns in NuGrid.
navigation:
  icon: i-lucide-layers
---

NuGrid supports grouping rows by one or more columns, creating expandable hierarchical views of your data.

:component-example{name="nu-grid-grouping-example"}

## Basic Grouping

Enable grouping with the `grouping` v-model:

```vue
<script setup lang="ts">
const grouping = ref(['category'])
</script>

<template>
  <NuGrid
    v-model:grouping="grouping"
    :data="data"
    :columns="columns"
  />
</template>
```

## Multi-Level Grouping

Group by multiple columns:

```vue
<script setup lang="ts">
const grouping = ref(['category', 'status'])
</script>

<template>
  <NuGrid
    v-model:grouping="grouping"
    :data="data"
    :columns="columns"
  />
</template>
```

Rows will be grouped first by category, then by status within each category.

## Dynamic Grouping

Allow users to change grouping:

```vue
<script setup lang="ts">
const grouping = ref<string[]>([])
const availableGroups = ['category', 'status', 'assignee']
</script>

<template>
  <div class="mb-4 flex gap-2">
    <UButton
      v-for="col in availableGroups"
      :key="col"
      :color="grouping.includes(col) ? 'primary' : 'neutral'"
      :variant="grouping.includes(col) ? 'solid' : 'outline'"
      @click="
        grouping.includes(col)
          ? grouping = grouping.filter(g => g !== col)
          : grouping = [...grouping, col]
      "
    >
      {{ col }}
    </UButton>

    <UButton
      v-if="grouping.length"
      color="neutral"
      variant="ghost"
      @click="grouping = []"
    >
      Clear
    </UButton>
  </div>

  <NuGrid
    v-model:grouping="grouping"
    :data="data"
    :columns="columns"
  />
</template>
```

## Expand/Collapse State

Track and control expanded groups:

```vue
<script setup lang="ts">
const expanded = ref<Record<string, boolean>>({})
</script>

<template>
  <NuGrid
    v-model:grouping="grouping"
    v-model:expanded="expanded"
    :data="data"
    :columns="columns"
  />

  <div class="mt-4">
    <UButton @click="expanded = {}">Collapse All</UButton>
  </div>
</template>
```

## Programmatic Expand/Collapse

Use the grid ref to control expansion:

```vue
<script setup lang="ts">
const gridRef = useTemplateRef('grid')

function expandAll() {
  gridRef.value?.tableApi?.toggleAllRowsExpanded(true)
}

function collapseAll() {
  gridRef.value?.tableApi?.toggleAllRowsExpanded(false)
}

function toggleGroup(groupId: string) {
  gridRef.value?.tableApi?.getRow(groupId)?.toggleExpanded()
}
</script>

<template>
  <div class="mb-4 flex gap-2">
    <UButton @click="expandAll">Expand All</UButton>
    <UButton @click="collapseAll">Collapse All</UButton>
  </div>

  <NuGrid
    ref="grid"
    v-model:grouping="grouping"
    :data="data"
    :columns="columns"
  />
</template>
```

## Group Aggregations

Display aggregate values in group rows:

```ts
const columns: NuGridColumn<Product>[] = [
  {
    accessorKey: 'price',
    header: 'Price',
    aggregationFn: 'sum',  // Sum prices in group
    aggregatedCell: ({ getValue }) => {
      return `Total: $${getValue().toFixed(2)}`
    },
  },
  {
    accessorKey: 'quantity',
    header: 'Quantity',
    aggregationFn: 'sum',
  },
  {
    accessorKey: 'rating',
    header: 'Rating',
    aggregationFn: 'mean',  // Average rating
  },
]
```

### Available Aggregation Functions

| Function | Description |
|----------|-------------|
| `sum` | Sum of values |
| `min` | Minimum value |
| `max` | Maximum value |
| `mean` | Average value |
| `median` | Median value |
| `count` | Number of rows |
| `unique` | Unique values |
| `uniqueCount` | Count of unique values |
| `extent` | [min, max] array |

### Custom Aggregation

```ts
{
  accessorKey: 'status',
  header: 'Status',
  aggregationFn: (columnId, leafRows, childRows) => {
    const active = leafRows.filter(r => r.original.status === 'active').length
    return `${active}/${leafRows.length} active`
  },
}
```

## Group Row Rendering

Customize group row appearance:

```ts
const columns: NuGridColumn<Product>[] = [
  {
    accessorKey: 'category',
    header: 'Category',
    cell: ({ row, getValue }) => {
      if (row.getIsGrouped()) {
        return h('div', { class: 'flex items-center gap-2' }, [
          h(UIcon, {
            name: row.getIsExpanded()
              ? 'i-lucide-chevron-down'
              : 'i-lucide-chevron-right',
          }),
          h('span', { class: 'font-semibold' }, getValue()),
          h('span', { class: 'text-muted' }, `(${row.subRows.length})`),
        ])
      }
      return getValue()
    },
  },
]
```

## Grouping with Selection

Row selection works with grouping:

```vue
<template>
  <NuGrid
    v-model:grouping="grouping"
    v-model:selected-rows="selectedRows"
    :data="data"
    :columns="columns"
    row-selection="multi"
  />
</template>
```

Selecting a group row selects all rows within that group.

## Grouping with Pagination

Pagination and grouping can be combined:

```vue
<template>
  <NuGrid
    v-model:grouping="grouping"
    :data="data"
    :columns="columns"
    :paging="{ pageSize: 20 }"
  />
</template>
```

Groups that span multiple pages will show partial content on each page.

## Nested Groups Example

```vue
<script setup lang="ts">
interface Task {
  id: number
  name: string
  project: string
  status: string
  priority: string
  assignee: string
}

const data = ref<Task[]>([
  { id: 1, name: 'Task 1', project: 'Alpha', status: 'active', priority: 'high', assignee: 'Alice' },
  { id: 2, name: 'Task 2', project: 'Alpha', status: 'active', priority: 'low', assignee: 'Bob' },
  { id: 3, name: 'Task 3', project: 'Beta', status: 'pending', priority: 'high', assignee: 'Alice' },
  // ...
])

const grouping = ref(['project', 'status'])

const columns: NuGridColumn<Task>[] = [
  { accessorKey: 'project', header: 'Project' },
  { accessorKey: 'status', header: 'Status' },
  { accessorKey: 'name', header: 'Task' },
  { accessorKey: 'priority', header: 'Priority' },
  { accessorKey: 'assignee', header: 'Assignee' },
]
</script>

<template>
  <NuGrid
    v-model:grouping="grouping"
    :data="data"
    :columns="columns"
  />
</template>
```

## Styling Groups

Group rows receive special attributes for styling:

```vue
<template>
  <NuGrid
    v-model:grouping="grouping"
    :data="data"
    :columns="columns"
    :ui="{
      tbody: '[&>tr[data-grouped=true]]:bg-elevated/30 [&>tr[data-grouped=true]]:font-semibold',
    }"
  />
</template>
```

## Next Steps

::card-group
  :::card
  ---
  icon: i-lucide-pin
  title: Sticky Headers
  to: /layout/sticky-headers
  ---
  Keep headers visible while scrolling.
  :::

  :::card
  ---
  icon: i-lucide-zap
  title: Virtualization
  to: /layout/virtualization
  ---
  Handle large datasets efficiently.
  :::
::

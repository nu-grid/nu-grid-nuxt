---
title: Virtualization
description: Handle large datasets efficiently with virtualization.
navigation:
  icon: i-lucide-zap
---

NuGrid uses virtualization to efficiently render large datasets by only rendering the visible rows.

:component-example{name="nu-grid-virtualization-example"}

## Enabling Virtualization

Enable virtualization with the `virtualization` prop:

```vue
<template>
  <NuGrid
    :data="data"
    :columns="columns"
    virtualization
  />
</template>
```

## When to Use Virtualization

| Dataset Size | Recommendation |
|--------------|----------------|
| < 100 rows | Not needed |
| 100-500 rows | Optional |
| 500-1000 rows | Recommended |
| > 1000 rows | Strongly recommended |

## How It Works

Virtualization renders only the rows visible in the viewport plus a small buffer. As the user scrolls:

1. New rows entering the viewport are rendered
2. Rows leaving the viewport are removed from the DOM
3. The scroll position is maintained using spacer elements

This keeps the DOM size constant regardless of data size.

## Container Height

For virtualization to work properly, the grid needs a defined height:

```vue
<template>
  <!-- Fixed height -->
  <div class="h-[600px]">
    <NuGrid :data="data" :columns="columns" virtualization />
  </div>

  <!-- Flex container -->
  <div class="flex h-screen flex-col">
    <header>Header</header>
    <div class="flex-1 min-h-0">
      <NuGrid :data="data" :columns="columns" virtualization />
    </div>
  </div>
</template>
```

## Row Height

NuGrid calculates row heights automatically, but you can optimize by providing estimates:

```vue
<template>
  <NuGrid
    :data="data"
    :columns="columns"
    virtualization
    :estimated-row-height="40"
  />
</template>
```

## Variable Row Heights

Virtualization handles variable row heights automatically:

```ts
const columns: NuGridColumn<Item>[] = [
  {
    accessorKey: 'description',
    header: 'Description',
    cell: ({ row }) => {
      // Multi-line content is handled correctly
      return h('div', { class: 'whitespace-pre-wrap' }, row.original.description)
    },
  },
]
```

## Scroll Restoration

NuGrid maintains scroll position during:

- Data updates
- Column changes
- Window resizing

## Performance Tips

### 1. Minimize Cell Complexity

Keep cell renderers simple:

```ts
// Good - simple render
{
  cell: ({ row }) => row.original.name
}

// Avoid - complex computation in render
{
  cell: ({ row }) => {
    const result = expensiveComputation(row.original)
    return formatResult(result)
  }
}
```

### 2. Use Computed Properties

Move calculations outside the render:

```vue
<script setup lang="ts">
const processedData = computed(() =>
  data.value.map(item => ({
    ...item,
    computedField: expensiveComputation(item),
  }))
)
</script>

<template>
  <NuGrid
    :data="processedData"
    :columns="columns"
    virtualization
  />
</template>
```

### 3. Avoid Reactive Dependencies in Cells

```ts
// Avoid - creates many reactive dependencies
{
  cell: ({ row }) => someRef.value + row.original.value
}

// Better - use column-level computed
{
  cell: ({ row, table }) => {
    const context = table.options.meta
    return context.multiplier * row.original.value
  }
}
```

### 4. Use Column Visibility

Hide columns that aren't needed:

```vue
<script setup lang="ts">
const columnVisibility = ref({
  internalId: false,
  debugInfo: false,
})
</script>

<template>
  <NuGrid
    v-model:column-visibility="columnVisibility"
    :data="data"
    :columns="columns"
    virtualization
  />
</template>
```

## Virtualization with Features

### With Pagination

You typically don't need virtualization with pagination:

```vue
<template>
  <!-- Choose one or the other -->

  <!-- Pagination for moderate datasets -->
  <NuGrid :data="data" :columns="columns" :paging="{ pageSize: 50 }" />

  <!-- Virtualization for large datasets without pagination -->
  <NuGrid :data="data" :columns="columns" virtualization />
</template>
```

### With Grouping

Virtualization works with grouping:

```vue
<template>
  <NuGrid
    v-model:grouping="grouping"
    :data="data"
    :columns="columns"
    virtualization
  />
</template>
```

### With Row Selection

Selection state is maintained during virtualization:

```vue
<template>
  <NuGrid
    v-model:row-selection="rowSelection"
    :data="data"
    :columns="columns"
    virtualization
    selection="multi"
  />
</template>
```

## Scroll Events

Handle scroll events:

```vue
<script setup lang="ts">
function onScroll(event) {
  console.log('Scroll position:', event.scrollTop)
}
</script>

<template>
  <NuGrid
    :data="data"
    :columns="columns"
    virtualization
    @scroll="onScroll"
  />
</template>
```

## Smooth Scrolling

NuGrid implements smooth scrolling behavior:

```vue
<template>
  <NuGrid
    :data="data"
    :columns="columns"
    virtualization
    :scroll-options="{
      behavior: 'smooth'
    }"
  />
</template>
```

## Benchmarks

Typical performance with virtualization enabled:

| Rows | Initial Render | Scroll Performance |
|------|----------------|-------------------|
| 1,000 | ~50ms | 60fps |
| 10,000 | ~60ms | 60fps |
| 100,000 | ~80ms | 60fps |

Performance depends on:
- Column count
- Cell complexity
- Browser/device

## Troubleshooting

### Grid Not Scrolling

Ensure the container has a defined height:

```vue
<!-- Won't work - no height constraint -->
<NuGrid :data="data" :columns="columns" virtualization />

<!-- Will work -->
<div class="h-[500px]">
  <NuGrid :data="data" :columns="columns" virtualization />
</div>
```

### Scroll Jumping

If scroll position jumps, try providing an estimated row height:

```vue
<template>
  <NuGrid
    :data="data"
    :columns="columns"
    virtualization
    :estimated-row-height="44"
  />
</template>
```

### Rows Not Rendering

Check that data is reactive:

```vue
<script setup lang="ts">
// Must be reactive
const data = ref([])

// Load data
data.value = await fetchData()
</script>
```

## Next Steps

::card-group
  :::card
  ---
  icon: i-lucide-move
  title: Column Sizing
  to: /layout/column-sizing
  ---
  Resize and auto-size columns.
  :::

  :::card
  ---
  icon: i-lucide-book-open
  title: Pagination
  to: /layout/paging
  ---
  Paginate large datasets.
  :::
::
